{
    "sourceFile": "src/app/shared/project-details/project-details.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1744041009526,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1744041009526,
            "name": "Commit-0",
            "content": "import { Component, Input } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\nimport * as bootstrap from 'bootstrap';\r\nimport { AddMemberComponent } from '../../add-member/add-member.component';\r\n@Component({\r\n  selector: 'app-project-details',\r\n  templateUrl: './project-details.component.html',\r\n  styleUrl: './project-details.component.scss'\r\n})\r\nexport class ProjectDetailsComponent {\r\n  projectId: string | null = null;\r\n  selectedTab: string = 'details';\r\n  selectedPhase: any = null;\r\n  project = {\r\n    name: 'Projet Exemple',\r\n    description: 'Description du projet',\r\n    createdAt: '01/01/2025',\r\n    progress: 60, \r\n    members: [\r\n      { id: 1, name: \"Alice\", image: \"assets/images/alice.jpg\" },\r\n      { id: 2, name: \"Bob\", image: \"assets/images/bob.jpg\" },\r\n      { id: 3,name: \"Charlie\", image: \"assets/images/charlie.jpg\" }\r\n    ],\r\n    \r\n    phases: [\r\n      {\r\n        name: 'Phase 1',\r\n        description: 'Description de la phase 1',\r\n        startDate: '01/01/2025',\r\n        endDate: '01/03/2025',\r\n        tasks: ['Tâche 1', 'Tâche 2'],\r\n        members: [\r\n          { id: 1,name: \"Alice\", image: \"assets/images/alice.jpg\" }\r\n        ]\r\n      },\r\n      {\r\n        name: 'Phase 2',\r\n        description: 'Description de la phase 2',\r\n        startDate: '02/03/2025',\r\n        endDate: '01/06/2025',\r\n        tasks: ['Tâche 3', 'Tâche 4'],\r\n        members: [\r\n          { name: \"Bob\", image: \"assets/images/bob.jpg\" }\r\n        ]\r\n      }\r\n    ]\r\n  };\r\n  availableMembers: any[] = [];\r\n  progressOffset: string = '';\r\n  selectedMember: any = null;\r\n  constructor(private route: ActivatedRoute, private dialog: MatDialog) {}\r\n\r\n  ngOnInit(): void {\r\n    this.projectId = this.route.snapshot.paramMap.get('id');\r\n    this.calculateProgress();\r\n  }\r\n  \r\n\r\n  // Fonction pour ajouter un membre à la phase\r\n  \r\n  changeTab(tab: string) {\r\n    this.selectedTab = tab;\r\n  }\r\n\r\n  calculateProgress() {\r\n    const circumference = 2 * Math.PI * 40; // 40 = rayon du cercle\r\n    this.progressOffset = ((100 - this.project.progress) / 100 * circumference).toString();\r\n  }\r\n  \r\n  editPhase(phase: any) {\r\n    console.log(\"Modifier la phase:\", phase);\r\n    // Ici, on peut ouvrir un modal pour modifier les détails\r\n  }\r\n  deletePhase(phase: any) {\r\n    this.project.phases = this.project.phases.filter(p => p !== phase);\r\n  }\r\n\r\n  // ProjectDetailsComponent\r\n\r\n// ProjectDetailsComponent\r\n\r\nopenMemberModal(phase: any): void {\r\n  this.selectedPhase = phase;  // Sélectionner la phase\r\n  this.availableMembers = this.project.members.filter(member => \r\n    !phase.members.some((phaseMember:any) => phaseMember.id === member.id)\r\n  ); // Filtrer les membres déjà assignés à la phase\r\n\r\n  // Ouvrir le modal avec les membres disponibles et la phase sélectionnée\r\n  const dialogRef = this.dialog.open(AddMemberComponent, {\r\n    data: { availableMembers: this.availableMembers, selectedPhase: this.selectedPhase }\r\n  });\r\n\r\n  // Quand un membre est ajouté dans le modal\r\n  dialogRef.afterClosed().subscribe(result => {\r\n    if (result) {\r\n      // Mettre à jour la phase dans le projet avec le membre ajouté\r\n      this.selectedPhase.members.push(result);\r\n    }\r\n  });\r\n}\r\n\r\n \r\n  \r\n}"
        }
    ]
}