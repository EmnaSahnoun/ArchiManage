{
    "sourceFile": "src/app/super-admin/agency-details/agency-details.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1744030012849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1744030024428,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n import { Component } from '@angular/core';\r\n+import { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\n \r\n @Component({\r\n   selector: 'app-agency-details',\r\n   templateUrl: './agency-details.component.html',\r\n"
                },
                {
                    "date": 1744030031057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { Component } from '@angular/core';\r\n+import { Component, Inject, OnInit } from '@angular/core';\r\n import { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\n \r\n @Component({\r\n   selector: 'app-agency-details',\r\n"
                },
                {
                    "date": 1744030181793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,6 +45,12 @@\n     if (confirm(`Voulez-vous vraiment supprimer l'utilisateur ${user.name} ?`)) {\r\n       this.users = this.users.filter(u => u.id !== user.id);\r\n     }\r\n   }\r\n-\r\n+  showAgencyDetails(agency: any) {\r\n+    this.dialog.open(AgencyDetailsComponent, {\r\n+      width: '800px',\r\n+      data: { agency: agency },\r\n+      panelClass: 'agency-details-dialog'\r\n+    });\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1744030191041,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,7 @@\n import { Component, Inject, OnInit } from '@angular/core';\r\n import { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\n+import { UserFormComponent } from '../user-form/user-form.component';\r\n \r\n @Component({\r\n   selector: 'app-agency-details',\r\n   templateUrl: './agency-details.component.html',\r\n@@ -29,9 +30,9 @@\n       width: '500px',\r\n       data: { agencyId: this.agency._id }\r\n     });\r\n \r\n-    dialogRef.afterClosed().subscribe(result => {\r\n+    dialogRef.afterClosed().subscribe(result:any => {\r\n       if (result) {\r\n         this.users.push({\r\n           ...result,\r\n           id: Date.now(),\r\n"
                },
                {
                    "date": 1744030201481,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import { Component, Inject, OnInit } from '@angular/core';\r\n-import { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\n+import { MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\r\n import { UserFormComponent } from '../user-form/user-form.component';\r\n \r\n @Component({\r\n   selector: 'app-agency-details',\r\n@@ -30,9 +30,9 @@\n       width: '500px',\r\n       data: { agencyId: this.agency._id }\r\n     });\r\n \r\n-    dialogRef.afterClosed().subscribe(result:any => {\r\n+    dialogRef.afterClosed().subscribe((result:any) => {\r\n       if (result) {\r\n         this.users.push({\r\n           ...result,\r\n           id: Date.now(),\r\n"
                },
                {
                    "date": 1744030209144,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n       width: '500px',\r\n       data: { agencyId: this.agency._id }\r\n     });\r\n \r\n-    dialogRef.afterClosed().subscribe((result:any) => {\r\n+    dialogRef.afterClosed().subscribe(result => {\r\n       if (result) {\r\n         this.users.push({\r\n           ...result,\r\n           id: Date.now(),\r\n"
                },
                {
                    "date": 1744030343284,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n       width: '500px',\r\n       data: { agencyId: this.agency._id }\r\n     });\r\n \r\n-    dialogRef.afterClosed().subscribe(result => {\r\n+    dialogRef.afterClosed().subscribe((result:any) => {\r\n       if (result) {\r\n         this.users.push({\r\n           ...result,\r\n           id: Date.now(),\r\n"
                },
                {
                    "date": 1744030350658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,12 +46,6 @@\n     if (confirm(`Voulez-vous vraiment supprimer l'utilisateur ${user.name} ?`)) {\r\n       this.users = this.users.filter(u => u.id !== user.id);\r\n     }\r\n   }\r\n-  showAgencyDetails(agency: any) {\r\n-    this.dialog.open(AgencyDetailsComponent, {\r\n-      width: '800px',\r\n-      data: { agency: agency },\r\n-      panelClass: 'agency-details-dialog'\r\n-    });\r\n-  }\r\n+  \r\n }\r\n"
                },
                {
                    "date": 1744033016249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,11 @@\n   users: any[] = [];\r\n   \r\n   constructor(\r\n     @Inject(MAT_DIALOG_DATA) public data: any,\r\n-    private dialog: MatDialog\r\n+    private dialog: MatDialog,\r\n+    private route: ActivatedRoute,\r\n+    private router: Router,\r\n   ) {\r\n     this.agency = data.agency;\r\n     // Simuler des données utilisateur (en pratique, vous feriez une requête API)\r\n     this.users = [\r\n"
                },
                {
                    "date": 1744033022732,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import { Component, Inject, OnInit } from '@angular/core';\r\n import { MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\r\n import { UserFormComponent } from '../user-form/user-form.component';\r\n+import { ActivatedRoute, Router } from '@angular/router';\r\n \r\n @Component({\r\n   selector: 'app-agency-details',\r\n   templateUrl: './agency-details.component.html',\r\n"
                },
                {
                    "date": 1744033042988,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,11 @@\n       { id: 2, name: 'User 2', email: 'user2@example.com', role: 'Agent', agencyId: this.agency._id }\r\n     ];\r\n   }\r\n \r\n-  ngOnInit(): void {}\r\n+  ngOnInit(): void {\r\n+    const agencyId = this.route.snapshot.paramMap.get('id');\r\n+  }\r\n \r\n   addUser() {\r\n     const dialogRef = this.dialog.open(UserFormComponent, {\r\n       width: '500px',\r\n"
                },
                {
                    "date": 1744033074127,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n import { Component, Inject, OnInit } from '@angular/core';\r\n import { MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\r\n import { UserFormComponent } from '../user-form/user-form.component';\r\n-import { ActivatedRoute, Router } from '@angular/router';\r\n \r\n @Component({\r\n   selector: 'app-agency-details',\r\n   templateUrl: './agency-details.component.html',\r\n@@ -13,11 +12,9 @@\n   users: any[] = [];\r\n   \r\n   constructor(\r\n     @Inject(MAT_DIALOG_DATA) public data: any,\r\n-    private dialog: MatDialog,\r\n-    private route: ActivatedRoute,\r\n-    private router: Router,\r\n+    private dialog: MatDialog\r\n   ) {\r\n     this.agency = data.agency;\r\n     // Simuler des données utilisateur (en pratique, vous feriez une requête API)\r\n     this.users = [\r\n@@ -25,11 +22,9 @@\n       { id: 2, name: 'User 2', email: 'user2@example.com', role: 'Agent', agencyId: this.agency._id }\r\n     ];\r\n   }\r\n \r\n-  ngOnInit(): void {\r\n-    const agencyId = this.route.snapshot.paramMap.get('id');\r\n-  }\r\n+  ngOnInit(): void {}\r\n \r\n   addUser() {\r\n     const dialogRef = this.dialog.open(UserFormComponent, {\r\n       width: '500px',\r\n"
                },
                {
                    "date": 1744039928908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,11 @@\n   users: any[] = [];\r\n   \r\n   constructor(\r\n     @Inject(MAT_DIALOG_DATA) public data: any,\r\n-    private dialog: MatDialog\r\n+    private dialog: MatDialog,\r\n+    private router: Router,\r\n+    private dialogRef: MatDialogRef<AgencyDetailsComponent>\r\n   ) {\r\n     this.agency = data.agency;\r\n     // Simuler des données utilisateur (en pratique, vous feriez une requête API)\r\n     this.users = [\r\n@@ -46,6 +48,12 @@\n     if (confirm(`Voulez-vous vraiment supprimer l'utilisateur ${user.name} ?`)) {\r\n       this.users = this.users.filter(u => u.id !== user.id);\r\n     }\r\n   }\r\n-  \r\n+  showAgencyDetails(agency: any) {\r\n+    this.dialog.open(AgencyDetailsComponent, {\r\n+      width: '800px',\r\n+      data: { agency: agency },\r\n+      panelClass: 'agency-details-dialog'\r\n+    });\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1744039935733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import { Component, Inject, OnInit } from '@angular/core';\r\n-import { MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\r\n+import { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\n import { UserFormComponent } from '../user-form/user-form.component';\r\n+import { Router } from '@angular/router';\r\n \r\n @Component({\r\n   selector: 'app-agency-details',\r\n   templateUrl: './agency-details.component.html',\r\n"
                },
                {
                    "date": 1744039969608,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,14 @@\n     ];\r\n   }\r\n \r\n   ngOnInit(): void {}\r\n-\r\n+  viewProjects() {\r\n+    this.dialogRef.close(); // Ferme la modal si vous êtes en mode dialog\r\n+    this.router.navigate(['/super-admin/projects'], { \r\n+      queryParams: { agencyId: this.agency._id } \r\n+    });\r\n+  }\r\n   addUser() {\r\n     const dialogRef = this.dialog.open(UserFormComponent, {\r\n       width: '500px',\r\n       data: { agencyId: this.agency._id }\r\n"
                }
            ],
            "date": 1744030012849,
            "name": "Commit-0",
            "content": "import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-agency-details',\r\n  templateUrl: './agency-details.component.html',\r\n  styleUrl: './agency-details.component.scss'\r\n})\r\nexport class AgencyDetailsComponent implements OnInit {\r\n  agency: any;\r\n  users: any[] = [];\r\n  \r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private dialog: MatDialog\r\n  ) {\r\n    this.agency = data.agency;\r\n    // Simuler des données utilisateur (en pratique, vous feriez une requête API)\r\n    this.users = [\r\n      { id: 1, name: 'User 1', email: 'user1@example.com', role: 'Admin', agencyId: this.agency._id },\r\n      { id: 2, name: 'User 2', email: 'user2@example.com', role: 'Agent', agencyId: this.agency._id }\r\n    ];\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  addUser() {\r\n    const dialogRef = this.dialog.open(UserFormComponent, {\r\n      width: '500px',\r\n      data: { agencyId: this.agency._id }\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.users.push({\r\n          ...result,\r\n          id: Date.now(),\r\n          agencyId: this.agency._id\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  deleteUser(user: any) {\r\n    if (confirm(`Voulez-vous vraiment supprimer l'utilisateur ${user.name} ?`)) {\r\n      this.users = this.users.filter(u => u.id !== user.id);\r\n    }\r\n  }\r\n\r\n}\r\n"
        }
    ]
}