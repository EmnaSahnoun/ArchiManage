{
    "sourceFile": "src/app/invoice/invoice.component.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 33,
            "patches": [
                {
                    "date": 1747865132872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1747865474769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,10 @@\n       <div class=\"invoice-lines-section\">\r\n         <div class=\"section-title-bar\">\r\n           <h3>Lignes de la facture</h3>\r\n           <button mat-stroked-button color=\"primary\" (click)=\"addInvoiceLine()\" type=\"button\" class=\"add-line-button\">\r\n-            <mat-icon>add</mat-icon> Ajouter une ligne\r\n+           <mat-icon>add</mat-icon> <span>Ajouter une ligne</span>\r\n+     \r\n           </button>\r\n         </div>\r\n         <div formArrayName=\"lines\">\r\n           <div *ngFor=\"let line of linesArray.controls; let i=index\" [formGroupName]=\"i\" class=\"invoice-line-item\">\r\n"
                },
                {
                    "date": 1747865490442,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,9 +83,10 @@\n \r\n       <mat-card-actions align=\"end\" class=\"form-actions\">\r\n         <button mat-stroked-button type=\"button\" (click)=\"onCancel()\" class=\"action-button cancel-button\">Annuler</button>\r\n         <button mat-flat-button color=\"primary\" type=\"submit\" class=\"action-button save-button\" [disabled]=\"invoiceForm.invalid || invoiceForm.pristine\">\r\n-          <mat-icon>save</mat-icon> Enregistrer la Facture\r\n+          <mat-icon>save</mat-icon> <span>Enregistrer la Facture</span>\r\n+     \r\n         </button>\r\n       </mat-card-actions>\r\n     </form>\r\n   </mat-card-content>\r\n"
                },
                {
                    "date": 1747865863979,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,9 @@\n             <button mat-icon-button color=\"warn\" (click)=\"removeInvoiceLine(i)\" type=\"button\" class=\"remove-line-button\" [disabled]=\"linesArray.controls.length <= 1\" title=\"Supprimer la ligne\">\r\n               <mat-icon>remove_circle_outline</mat-icon>\r\n             </button>\r\n           </div>\r\n-          <mat-error *ngIf=\"linesArray.hasError('minlength') && invoiceForm.get('lines')?.touched\" class=\"form-array-error\">\r\n+          <mat-error  class=\"form-array-error\">\r\n             Au moins une ligne de facture est requise.\r\n           </mat-error>\r\n         </div>\r\n       </div>\r\n@@ -84,10 +84,9 @@\n       <mat-card-actions align=\"end\" class=\"form-actions\">\r\n         <button mat-stroked-button type=\"button\" (click)=\"onCancel()\" class=\"action-button cancel-button\">Annuler</button>\r\n         <button mat-flat-button color=\"primary\" type=\"submit\" class=\"action-button save-button\" [disabled]=\"invoiceForm.invalid || invoiceForm.pristine\">\r\n           <mat-icon>save</mat-icon> <span>Enregistrer la Facture</span>\r\n-     \r\n-        </button>\r\n+             </button>\r\n       </mat-card-actions>\r\n     </form>\r\n   </mat-card-content>\r\n </mat-card>\r\n"
                },
                {
                    "date": 1747865901995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,9 @@\n             <button mat-icon-button color=\"warn\" (click)=\"removeInvoiceLine(i)\" type=\"button\" class=\"remove-line-button\" [disabled]=\"linesArray.controls.length <= 1\" title=\"Supprimer la ligne\">\r\n               <mat-icon>remove_circle_outline</mat-icon>\r\n             </button>\r\n           </div>\r\n-          <mat-error  class=\"form-array-error\">\r\n+          <mat-error *ngIf=\"linesArray.hasError('minlength') && invoiceForm.get('lines')?.touched\" class=\"form-array-error\">\r\n             Au moins une ligne de facture est requise.\r\n           </mat-error>\r\n         </div>\r\n       </div>\r\n"
                },
                {
                    "date": 1747866035699,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,20 +3,21 @@\n     <mat-card-title>Créer une Nouvelle Facture</mat-card-title>\r\n   </mat-card-header>\r\n   <mat-card-content>\r\n     <form [formGroup]=\"invoiceForm\" (ngSubmit)=\"onSubmit()\">\r\n-      <!-- Client Selection -->\r\n-      <mat-form-field appearance=\"outline\" class=\"form-field full-width\">\r\n-        <mat-label>Client</mat-label>\r\n-        <mat-select formControlName=\"clientId\">\r\n-          <mat-option *ngFor=\"let client of clients\" [value]=\"client.id\">\r\n-            {{ client.name }}\r\n-          </mat-option>\r\n-        </mat-select>\r\n-        <mat-error *ngIf=\"invoiceForm.get('clientId')?.hasError('required') && invoiceForm.get('clientId')?.touched\">\r\n-          Le client est requis.\r\n-        </mat-error>\r\n-      </mat-form-field>\r\n+      <div class=\"invoice-main-details\">\r\n+        <!-- Client Selection -->\r\n+        <mat-form-field appearance=\"outline\" class=\"form-field full-width\">\r\n+          <mat-label>Client</mat-label>\r\n+          <mat-select formControlName=\"clientId\">\r\n+            <mat-option *ngFor=\"let client of clients\" [value]=\"client.id\">\r\n+              {{ client.name }}\r\n+            </mat-option>\r\n+          </mat-select>\r\n+          <mat-error *ngIf=\"invoiceForm.get('clientId')?.hasError('required') && invoiceForm.get('clientId')?.touched\">\r\n+            Le client est requis.\r\n+          </mat-error>\r\n+        </mat-form-field>\r\n \r\n       <!-- Discount -->\r\n       <mat-form-field appearance=\"outline\" class=\"form-field\">\r\n         <mat-label>Remise (%)</mat-label>\r\n"
                },
                {
                    "date": 1747866056333,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,16 +17,16 @@\n             Le client est requis.\r\n           </mat-error>\r\n         </mat-form-field>\r\n \r\n-      <!-- Discount -->\r\n-      <mat-form-field appearance=\"outline\" class=\"form-field\">\r\n-        <mat-label>Remise (%)</mat-label>\r\n-        <input matInput type=\"number\" formControlName=\"discount\" min=\"0\" max=\"100\">\r\n-        <mat-error *ngIf=\"invoiceForm.get('discount')?.touched && invoiceForm.get('discount')?.invalid\">\r\n-          La remise doit être un nombre valide entre 0 et 100.\r\n-        </mat-error>\r\n-      </mat-form-field>\r\n+     <!-- Discount -->\r\n+        <mat-form-field appearance=\"outline\" class=\"form-field\"> <!-- Peut nécessiter un style pour la largeur si pas full-width -->\r\n+          <mat-label>Remise (%)</mat-label>\r\n+          <input matInput type=\"number\" formControlName=\"discount\" min=\"0\" max=\"100\">\r\n+          <mat-error *ngIf=\"invoiceForm.get('discount')?.touched && invoiceForm.get('discount')?.invalid\">\r\n+            La remise doit être un nombre valide entre 0 et 100.\r\n+          </mat-error>\r\n+        </mat-form-field>\r\n \r\n       <!-- Notes -->\r\n       <mat-form-field appearance=\"outline\" class=\"form-field full-width\">\r\n         <mat-label>Notes (Optionnel)</mat-label>\r\n"
                },
                {
                    "date": 1747866072924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,12 +27,13 @@\n           </mat-error>\r\n         </mat-form-field>\r\n \r\n       <!-- Notes -->\r\n-      <mat-form-field appearance=\"outline\" class=\"form-field full-width\">\r\n-        <mat-label>Notes (Optionnel)</mat-label>\r\n-        <textarea matInput formControlName=\"notes\" cdkTextareaAutosize cdkAutosizeMinRows=\"2\" cdkAutosizeMaxRows=\"5\" placeholder=\"Ajoutez des notes ou termes spécifiques...\"></textarea>\r\n-      </mat-form-field>\r\n+<mat-form-field appearance=\"outline\" class=\"form-field full-width\">\r\n+          <mat-label>Notes (Optionnel)</mat-label>\r\n+          <textarea matInput formControlName=\"notes\" cdkTextareaAutosize cdkAutosizeMinRows=\"2\" cdkAutosizeMaxRows=\"5\" placeholder=\"Ajoutez des notes ou termes spécifiques...\"></textarea>\r\n+        </mat-form-field>\r\n+      </div>\r\n \r\n       <!-- Invoice Lines Section -->\r\n       <div class=\"invoice-lines-section\">\r\n         <div class=\"section-title-bar\">\r\n"
                },
                {
                    "date": 1747867371147,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,94 +1,89 @@\n-<mat-card class=\"add-invoice-card\">\r\n-  <mat-card-header>\r\n-    <mat-card-title>Créer une Nouvelle Facture</mat-card-title>\r\n-  </mat-card-header>\r\n-  <mat-card-content>\r\n-    <form [formGroup]=\"invoiceForm\" (ngSubmit)=\"onSubmit()\">\r\n-      <div class=\"invoice-main-details\">\r\n-        <!-- Client Selection -->\r\n-        <mat-form-field appearance=\"outline\" class=\"form-field full-width\">\r\n-          <mat-label>Client</mat-label>\r\n-          <mat-select formControlName=\"clientId\">\r\n-            <mat-option *ngFor=\"let client of clients\" [value]=\"client.id\">\r\n-              {{ client.name }}\r\n-            </mat-option>\r\n-          </mat-select>\r\n-          <mat-error *ngIf=\"invoiceForm.get('clientId')?.hasError('required') && invoiceForm.get('clientId')?.touched\">\r\n-            Le client est requis.\r\n-          </mat-error>\r\n-        </mat-form-field>\r\n+<!-- facture.component.html -->\r\n+<div class=\"invoice-container\">\r\n+  <div class=\"invoice-header\">\r\n+    <div class=\"logo-box\">\r\n+      <div class=\"logo-placeholder\">+ Ajoutez votre logo</div>\r\n+    </div>\r\n+    <div class=\"invoice-title\">\r\n+      <h2>FACTURE</h2>\r\n+      <div class=\"invoice-number\">\r\n+        <label for=\"invoiceNumber\">#</label>\r\n+        <input id=\"invoiceNumber\" [(ngModel)]=\"invoice.number\" />\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n \r\n-     <!-- Discount -->\r\n-        <mat-form-field appearance=\"outline\" class=\"form-field\"> <!-- Peut nécessiter un style pour la largeur si pas full-width -->\r\n-          <mat-label>Remise (%)</mat-label>\r\n-          <input matInput type=\"number\" formControlName=\"discount\" min=\"0\" max=\"100\">\r\n-          <mat-error *ngIf=\"invoiceForm.get('discount')?.touched && invoiceForm.get('discount')?.invalid\">\r\n-            La remise doit être un nombre valide entre 0 et 100.\r\n-          </mat-error>\r\n-        </mat-form-field>\r\n+  <div class=\"invoice-details\">\r\n+    <div class=\"left\">\r\n+      <label>De qui est-ce?</label>\r\n+      <input [(ngModel)]=\"invoice.from\" />\r\n \r\n-      <!-- Notes -->\r\n-<mat-form-field appearance=\"outline\" class=\"form-field full-width\">\r\n-          <mat-label>Notes (Optionnel)</mat-label>\r\n-          <textarea matInput formControlName=\"notes\" cdkTextareaAutosize cdkAutosizeMinRows=\"2\" cdkAutosizeMaxRows=\"5\" placeholder=\"Ajoutez des notes ou termes spécifiques...\"></textarea>\r\n-        </mat-form-field>\r\n-      </div>\r\n+      <label>A qui s'adresse-t-il ?</label>\r\n+      <input [(ngModel)]=\"invoice.to\" />\r\n \r\n-      <!-- Invoice Lines Section -->\r\n-      <div class=\"invoice-lines-section\">\r\n-        <div class=\"section-title-bar\">\r\n-          <h3>Lignes de la facture</h3>\r\n-          <button mat-stroked-button color=\"primary\" (click)=\"addInvoiceLine()\" type=\"button\" class=\"add-line-button\">\r\n-           <mat-icon>add</mat-icon> <span>Ajouter une ligne</span>\r\n-     \r\n-          </button>\r\n-        </div>\r\n-        <div formArrayName=\"lines\">\r\n-          <div *ngFor=\"let line of linesArray.controls; let i=index\" [formGroupName]=\"i\" class=\"invoice-line-item\">\r\n-            <mat-form-field appearance=\"outline\" class=\"line-field description-field\">\r\n-              <mat-label>Description Article/Service</mat-label>\r\n-              <input matInput formControlName=\"description\">\r\n-              <mat-error *ngIf=\"line.get('description')?.hasError('required') && line.get('description')?.touched\">\r\n-                Description requise.\r\n-              </mat-error>\r\n-            </mat-form-field>\r\n+      <label>Adresse de livraison</label>\r\n+      <input [(ngModel)]=\"invoice.shippingAddress\" />\r\n+    </div>\r\n \r\n-            <mat-form-field appearance=\"outline\" class=\"line-field quantity-field\">\r\n-              <mat-label>Qté</mat-label>\r\n-              <input matInput type=\"number\" formControlName=\"quantity\" min=\"1\">\r\n-               <mat-error *ngIf=\"line.get('quantity')?.touched && line.get('quantity')?.invalid\">\r\n-                Min 1.\r\n-              </mat-error>\r\n-            </mat-form-field>\r\n+    <div class=\"right\">\r\n+      <label>Date</label>\r\n+      <input type=\"date\" [(ngModel)]=\"invoice.date\" />\r\n \r\n-            <mat-form-field appearance=\"outline\" class=\"line-field price-field\">\r\n-              <mat-label>Prix Unitaire</mat-label>\r\n-              <input matInput type=\"number\" formControlName=\"unitPrice\" min=\"0\">\r\n-              <mat-error *ngIf=\"line.get('unitPrice')?.touched && line.get('unitPrice')?.invalid\">\r\n-                Prix positif requis.\r\n-              </mat-error>\r\n-            </mat-form-field>\r\n+      <label>Modalités de paiement</label>\r\n+      <input [(ngModel)]=\"invoice.paymentTerms\" />\r\n \r\n-            <button mat-icon-button color=\"warn\" (click)=\"removeInvoiceLine(i)\" type=\"button\" class=\"remove-line-button\" [disabled]=\"linesArray.controls.length <= 1\" title=\"Supprimer la ligne\">\r\n-              <mat-icon>remove_circle_outline</mat-icon>\r\n-            </button>\r\n-          </div>\r\n-          <mat-error *ngIf=\"linesArray.hasError('minlength') && invoiceForm.get('lines')?.touched\" class=\"form-array-error\">\r\n-            Au moins une ligne de facture est requise.\r\n-          </mat-error>\r\n-        </div>\r\n-      </div>\r\n+      <label>A payer avant le</label>\r\n+      <input type=\"date\" [(ngModel)]=\"invoice.dueDate\" />\r\n \r\n-      <!-- Hidden fields for data that is fixed or derived -->\r\n-      <input type=\"hidden\" formControlName=\"documentType\">\r\n-      <input type=\"hidden\" formControlName=\"companyId\">\r\n+      <label>Bon de commande</label>\r\n+      <input [(ngModel)]=\"invoice.purchaseOrder\" />\r\n+    </div>\r\n+  </div>\r\n \r\n-      <mat-card-actions align=\"end\" class=\"form-actions\">\r\n-        <button mat-stroked-button type=\"button\" (click)=\"onCancel()\" class=\"action-button cancel-button\">Annuler</button>\r\n-        <button mat-flat-button color=\"primary\" type=\"submit\" class=\"action-button save-button\" [disabled]=\"invoiceForm.invalid || invoiceForm.pristine\">\r\n-          <mat-icon>save</mat-icon> <span>Enregistrer la Facture</span>\r\n-             </button>\r\n-      </mat-card-actions>\r\n-    </form>\r\n-  </mat-card-content>\r\n-</mat-card>\r\n+  <table class=\"invoice-table\">\r\n+    <thead>\r\n+      <tr>\r\n+        <th>Objet</th>\r\n+        <th>Quantité</th>\r\n+        <th>Prix unitaire</th>\r\n+        <th>Montant</th>\r\n+      </tr>\r\n+    </thead>\r\n+    <tbody>\r\n+      <tr *ngFor=\"let item of invoice.items\">\r\n+        <td><input [(ngModel)]=\"item.description\" /></td>\r\n+        <td><input type=\"number\" [(ngModel)]=\"item.quantity\" (input)=\"calculateTotals()\" /></td>\r\n+        <td><input type=\"number\" [(ngModel)]=\"item.unitPrice\" (input)=\"calculateTotals()\" /></td>\r\n+        <td>{{ item.quantity * item.unitPrice | currency:'USD' }}</td>\r\n+      </tr>\r\n+    </tbody>\r\n+  </table>\r\n+  <button class=\"add-item\" (click)=\"addItem()\">+ Élément de campagne</button>\r\n+\r\n+  <div class=\"notes-terms\">\r\n+    <div>\r\n+      <label>Remarques</label>\r\n+      <textarea [(ngModel)]=\"invoice.notes\"></textarea>\r\n+    </div>\r\n+    <div>\r\n+      <label>Termes</label>\r\n+      <textarea [(ngModel)]=\"invoice.terms\"></textarea>\r\n+    </div>\r\n+  </div>\r\n+\r\n+  <div class=\"invoice-summary\">\r\n+    <div>Sous-total: {{ subtotal | currency:'USD' }}</div>\r\n+    <div>\r\n+      Impôt:\r\n+      <input type=\"number\" [(ngModel)]=\"invoice.taxRate\" (input)=\"calculateTotals()\" />%\r\n+    </div>\r\n+    <div *ngIf=\"invoice.discount\">- Rabais: {{ invoice.discount | currency:'USD' }}</div>\r\n+    <div *ngIf=\"invoice.shipping\">+ Expédition: {{ invoice.shipping | currency:'USD' }}</div>\r\n+    <div>Total: {{ total | currency:'USD' }}</div>\r\n+    <div>\r\n+      Montant payé:\r\n+      <input type=\"number\" [(ngModel)]=\"invoice.paid\" (input)=\"calculateTotals()\" />\r\n+    </div>\r\n+    <div><strong>Solde à payer: {{ balance | currency:'USD' }}</strong></div>\r\n+  </div>\r\n+</div>\r\n"
                },
                {
                    "date": 1747867753075,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,89 +1,137 @@\n-<!-- facture.component.html -->\r\n-<div class=\"invoice-container\">\r\n-  <div class=\"invoice-header\">\r\n-    <div class=\"logo-box\">\r\n-      <div class=\"logo-placeholder\">+ Ajoutez votre logo</div>\r\n-    </div>\r\n-    <div class=\"invoice-title\">\r\n-      <h2>FACTURE</h2>\r\n-      <div class=\"invoice-number\">\r\n-        <label for=\"invoiceNumber\">#</label>\r\n-        <input id=\"invoiceNumber\" [(ngModel)]=\"invoice.number\" />\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-\r\n-  <div class=\"invoice-details\">\r\n-    <div class=\"left\">\r\n-      <label>De qui est-ce?</label>\r\n-      <input [(ngModel)]=\"invoice.from\" />\r\n-\r\n-      <label>A qui s'adresse-t-il ?</label>\r\n-      <input [(ngModel)]=\"invoice.to\" />\r\n-\r\n-      <label>Adresse de livraison</label>\r\n-      <input [(ngModel)]=\"invoice.shippingAddress\" />\r\n-    </div>\r\n-\r\n-    <div class=\"right\">\r\n-      <label>Date</label>\r\n-      <input type=\"date\" [(ngModel)]=\"invoice.date\" />\r\n-\r\n-      <label>Modalités de paiement</label>\r\n-      <input [(ngModel)]=\"invoice.paymentTerms\" />\r\n-\r\n-      <label>A payer avant le</label>\r\n-      <input type=\"date\" [(ngModel)]=\"invoice.dueDate\" />\r\n-\r\n-      <label>Bon de commande</label>\r\n-      <input [(ngModel)]=\"invoice.purchaseOrder\" />\r\n-    </div>\r\n-  </div>\r\n-\r\n-  <table class=\"invoice-table\">\r\n-    <thead>\r\n-      <tr>\r\n-        <th>Objet</th>\r\n-        <th>Quantité</th>\r\n-        <th>Prix unitaire</th>\r\n-        <th>Montant</th>\r\n-      </tr>\r\n-    </thead>\r\n-    <tbody>\r\n-      <tr *ngFor=\"let item of invoice.items\">\r\n-        <td><input [(ngModel)]=\"item.description\" /></td>\r\n-        <td><input type=\"number\" [(ngModel)]=\"item.quantity\" (input)=\"calculateTotals()\" /></td>\r\n-        <td><input type=\"number\" [(ngModel)]=\"item.unitPrice\" (input)=\"calculateTotals()\" /></td>\r\n-        <td>{{ item.quantity * item.unitPrice | currency:'USD' }}</td>\r\n-      </tr>\r\n-    </tbody>\r\n-  </table>\r\n-  <button class=\"add-item\" (click)=\"addItem()\">+ Élément de campagne</button>\r\n-\r\n-  <div class=\"notes-terms\">\r\n-    <div>\r\n-      <label>Remarques</label>\r\n-      <textarea [(ngModel)]=\"invoice.notes\"></textarea>\r\n-    </div>\r\n-    <div>\r\n-      <label>Termes</label>\r\n-      <textarea [(ngModel)]=\"invoice.terms\"></textarea>\r\n-    </div>\r\n-  </div>\r\n-\r\n-  <div class=\"invoice-summary\">\r\n-    <div>Sous-total: {{ subtotal | currency:'USD' }}</div>\r\n-    <div>\r\n-      Impôt:\r\n-      <input type=\"number\" [(ngModel)]=\"invoice.taxRate\" (input)=\"calculateTotals()\" />%\r\n-    </div>\r\n-    <div *ngIf=\"invoice.discount\">- Rabais: {{ invoice.discount | currency:'USD' }}</div>\r\n-    <div *ngIf=\"invoice.shipping\">+ Expédition: {{ invoice.shipping | currency:'USD' }}</div>\r\n-    <div>Total: {{ total | currency:'USD' }}</div>\r\n-    <div>\r\n-      Montant payé:\r\n-      <input type=\"number\" [(ngModel)]=\"invoice.paid\" (input)=\"calculateTotals()\" />\r\n-    </div>\r\n-    <div><strong>Solde à payer: {{ balance | currency:'USD' }}</strong></div>\r\n-  </div>\r\n-</div>\r\n+--- a/d:\\satge pfe\\application\\ArchiManage\\Front\\WebFront\\src\\app\\invoice\\invoice.component.html\r\n++++ b/d:\\satge pfe\\application\\ArchiManage\\Front\\WebFront\\src\\app\\invoice\\invoice.component.html\r\n+@@ -1,10 +1,130 @@\r\n+-<p>invoice works!</p>\r\n++<mat-card class=\"invoice-container\">\r\n++  <mat-card-header class=\"invoice-main-header\">\r\n++    <mat-card-title>Nouvelle Facture</mat-card-title>\r\n++    <span class=\"invoice-number\">Facture #{{ invoice.number }}</span>\r\n++  </mat-card-header>\r\n++\r\n++  <mat-card-content>\r\n++    <!-- Section De / À -->\r\n++    <div class=\"invoice-meta-section\">\r\n++      <div class=\"meta-column\">\r\n++        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n++          <mat-label>De (Votre entreprise)</mat-label>\r\n++          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"3\" [(ngModel)]=\"invoice.from\" name=\"invoiceFrom\"></textarea>\r\n++        </mat-form-field>\r\n++      </div>\r\n++      <div class=\"meta-column\">\r\n++        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n++          <mat-label>À (Client)</mat-label>\r\n++          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"3\" [(ngModel)]=\"invoice.to\" name=\"invoiceTo\"></textarea>\r\n++        </mat-form-field>\r\n++      </div>\r\n++    </div>\r\n++\r\n++    <div class=\"invoice-meta-section\">\r\n++       <div class=\"meta-column\">\r\n++        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n++          <mat-label>Adresse de livraison (si différente)</mat-label>\r\n++          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"2\" [(ngModel)]=\"invoice.shippingAddress\" name=\"shippingAddress\"></textarea>\r\n++        </mat-form-field>\r\n++      </div>\r\n++       <div class=\"meta-column\">\r\n++        <!-- Espace réservé pour d'autres détails si nécessaire -->\r\n++      </div>\r\n++    </div>\r\n+ \r\n++    <!-- Section Dates et Conditions -->\r\n++    <div class=\"invoice-details-section\">\r\n++      <mat-form-field appearance=\"outline\">\r\n++        <mat-label>Date d'émission</mat-label>\r\n++        <input matInput type=\"date\" [(ngModel)]=\"invoice.date\" name=\"invoiceDate\" (ngModelChange)=\"onDateOrTermsChange()\">\r\n++      </mat-form-field>\r\n++\r\n++      <mat-form-field appearance=\"outline\">\r\n++        <mat-label>Conditions de paiement</mat-label>\r\n++        <input matInput [(ngModel)]=\"invoice.paymentTerms\" name=\"paymentTerms\" (ngModelChange)=\"onDateOrTermsChange()\">\r\n++      </mat-form-field>\r\n++\r\n++      <mat-form-field appearance=\"outline\">\r\n++        <mat-label>Date d'échéance</mat-label>\r\n++        <input matInput type=\"date\" [(ngModel)]=\"invoice.dueDate\" name=\"dueDate\" readonly>\r\n++      </mat-form-field>\r\n++\r\n++      <mat-form-field appearance=\"outline\">\r\n++        <mat-label>N° Bon de commande (Optionnel)</mat-label>\r\n++        <input matInput [(ngModel)]=\"invoice.purchaseOrder\" name=\"purchaseOrder\">\r\n++      </mat-form-field>\r\n++    </div>\r\n++\r\n++    <!-- Section Articles de la facture -->\r\n++    <h3 class=\"section-title\">Articles</h3>\r\n++    <div class=\"invoice-items\">\r\n++      <div class=\"item-header item-row\">\r\n++        <div class=\"item-description\">Description</div>\r\n++        <div class=\"item-quantity\">Quantité</div>\r\n++        <div class=\"item-unit-price\">Prix Unitaire (€)</div>\r\n++        <div class=\"item-total\">Total (€)</div>\r\n++        <div class=\"item-actions\"></div>\r\n++      </div>\r\n++\r\n++      <div *ngFor=\"let item of invoice.items; let i = index\" class=\"item-row\">\r\n++        <mat-form-field appearance=\"outline\" class=\"item-description\">\r\n++          <mat-label>Description</mat-label>\r\n++          <input matInput [(ngModel)]=\"item.description\" name=\"itemDescription{{i}}\" (ngModelChange)=\"calculateTotals()\">\r\n++        </mat-form-field>\r\n++\r\n++        <mat-form-field appearance=\"outline\" class=\"item-quantity\">\r\n++          <mat-label>Qté</mat-label>\r\n++          <input matInput type=\"number\" [(ngModel)]=\"item.quantity\" name=\"itemQuantity{{i}}\" (ngModelChange)=\"calculateTotals()\" min=\"0\">\r\n++        </mat-form-field>\r\n++\r\n++        <mat-form-field appearance=\"outline\" class=\"item-unit-price\">\r\n++          <mat-label>Prix Unit.</mat-label>\r\n++          <input matInput type=\"number\" [(ngModel)]=\"item.unitPrice\" name=\"itemUnitPrice{{i}}\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.01\">\r\n++        </mat-form-field>\r\n++\r\n++        <div class=\"item-total\">\r\n++          {{ (item.quantity * item.unitPrice) | currency:'EUR':'symbol':'1.2-2' }}\r\n++        </div>\r\n++\r\n++        <div class=\"item-actions\">\r\n++          <button mat-icon-button color=\"warn\" (click)=\"removeItem(i)\" [disabled]=\"invoice.items.length <= 1\" matTooltip=\"Supprimer l'article\">\r\n++            <mat-icon>delete</mat-icon>\r\n++          </button>\r\n++        </div>\r\n++      </div>\r\n++\r\n++      <button mat-stroked-button color=\"primary\" (click)=\"addItem()\" class=\"add-item-button\">\r\n++        <mat-icon>add</mat-icon> Ajouter un article\r\n++      </button>\r\n++    </div>\r\n++\r\n++    <!-- Section Totaux et Notes -->\r\n++    <div class=\"invoice-summary-section\">\r\n++      <div class=\"summary-left\">\r\n++        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n++          <mat-label>Notes (Visible par le client)</mat-label>\r\n++          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"2\" [(ngModel)]=\"invoice.notes\" name=\"invoiceNotes\"></textarea>\r\n++        </mat-form-field>\r\n++        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n++          <mat-label>Termes et Conditions</mat-label>\r\n++          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"2\" [(ngModel)]=\"invoice.terms\" name=\"invoiceTerms\"></textarea>\r\n++        </mat-form-field>\r\n++      </div>\r\n++\r\n++      <div class=\"summary-right\">\r\n++        <div class=\"summary-row\"><span>Sous-total:</span><span>{{ subtotal | currency:'EUR':'symbol':'1.2-2' }}</span></div>\r\n++        <div class=\"summary-row interactive-row\"><span>TVA (%):</span><mat-form-field appearance=\"outline\" class=\"compact-form-field\"><input matInput type=\"number\" [(ngModel)]=\"invoice.taxRate\" name=\"taxRate\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.1\"></mat-form-field></div>\r\n++        <div class=\"summary-row\"><span>Montant TVA:</span><span>{{ (subtotal * (invoice.taxRate / 100)) | currency:'EUR':'symbol':'1.2-2' }}</span></div>\r\n++        <div class=\"summary-row interactive-row\"><span>Remise (€):</span><mat-form-field appearance=\"outline\" class=\"compact-form-field\"><input matInput type=\"number\" [(ngModel)]=\"invoice.discount\" name=\"discount\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.01\"></mat-form-field></div>\r\n++        <div class=\"summary-row interactive-row\"><span>Frais de port (€):</span><mat-form-field appearance=\"outline\" class=\"compact-form-field\"><input matInput type=\"number\" [(ngModel)]=\"invoice.shipping\" name=\"shipping\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.01\"></mat-form-field></div>\r\n++        <div class=\"summary-row total-row\"><span>TOTAL:</span><span>{{ total | currency:'EUR':'symbol':'1.2-2' }}</span></div>\r\n++        <hr>\r\n++        <div class=\"summary-row interactive-row\"><span>Montant Payé (€):</span><mat-form-field appearance=\"outline\" class=\"compact-form-field\"><input matInput type=\"number\" [(ngModel)]=\"invoice.paid\" name=\"paidAmount\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.01\"></mat-form-field></div>\r\n++        <div class=\"summary-row balance-due-row\"><span>Solde Dû:</span><span>{{ balance | currency:'EUR':'symbol':'1.2-2' }}</span></div>\r\n++      </div>\r\n++    </div>\r\n++  </mat-card-content>\r\n++\r\n++  <mat-card-actions align=\"end\">\r\n++    <button mat-stroked-button routerLink=\"/invoices\">Annuler</button> <!-- Modifiez le routerLink si nécessaire -->\r\n++    <button mat-raised-button color=\"primary\" (click)=\"saveInvoice()\">Enregistrer la Facture</button>\r\n++  </mat-card-actions>\r\n++</mat-card>\r\n"
                },
                {
                    "date": 1747867761285,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,5 @@\n---- a/d:\\satge pfe\\application\\ArchiManage\\Front\\WebFront\\src\\app\\invoice\\invoice.component.html\r\n-+++ b/d:\\satge pfe\\application\\ArchiManage\\Front\\WebFront\\src\\app\\invoice\\invoice.component.html\r\n-@@ -1,10 +1,130 @@\r\n--<p>invoice works!</p>\r\n+\r\n +<mat-card class=\"invoice-container\">\r\n +  <mat-card-header class=\"invoice-main-header\">\r\n +    <mat-card-title>Nouvelle Facture</mat-card-title>\r\n +    <span class=\"invoice-number\">Facture #{{ invoice.number }}</span>\r\n"
                },
                {
                    "date": 1747867801052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,8 @@\n-\r\n+--- a/d:\\satge pfe\\application\\ArchiManage\\Front\\WebFront\\src\\app\\invoice\\invoice.component.html\r\n++++ b/d:\\satge pfe\\application\\ArchiManage\\Front\\WebFront\\src\\app\\invoice\\invoice.component.html\r\n+@@ -1,10 +1,130 @@\r\n+-<p>invoice works!</p>\r\n +<mat-card class=\"invoice-container\">\r\n +  <mat-card-header class=\"invoice-main-header\">\r\n +    <mat-card-title>Nouvelle Facture</mat-card-title>\r\n +    <span class=\"invoice-number\">Facture #{{ invoice.number }}</span>\r\n"
                },
                {
                    "date": 1747910474542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,137 +1,91 @@\n---- a/d:\\satge pfe\\application\\ArchiManage\\Front\\WebFront\\src\\app\\invoice\\invoice.component.html\r\n-+++ b/d:\\satge pfe\\application\\ArchiManage\\Front\\WebFront\\src\\app\\invoice\\invoice.component.html\r\n-@@ -1,10 +1,130 @@\r\n--<p>invoice works!</p>\r\n-+<mat-card class=\"invoice-container\">\r\n-+  <mat-card-header class=\"invoice-main-header\">\r\n-+    <mat-card-title>Nouvelle Facture</mat-card-title>\r\n-+    <span class=\"invoice-number\">Facture #{{ invoice.number }}</span>\r\n-+  </mat-card-header>\r\n-+\r\n-+  <mat-card-content>\r\n-+    <!-- Section De / À -->\r\n-+    <div class=\"invoice-meta-section\">\r\n-+      <div class=\"meta-column\">\r\n-+        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n-+          <mat-label>De (Votre entreprise)</mat-label>\r\n-+          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"3\" [(ngModel)]=\"invoice.from\" name=\"invoiceFrom\"></textarea>\r\n-+        </mat-form-field>\r\n-+      </div>\r\n-+      <div class=\"meta-column\">\r\n-+        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n-+          <mat-label>À (Client)</mat-label>\r\n-+          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"3\" [(ngModel)]=\"invoice.to\" name=\"invoiceTo\"></textarea>\r\n-+        </mat-form-field>\r\n-+      </div>\r\n-+    </div>\r\n-+\r\n-+    <div class=\"invoice-meta-section\">\r\n-+       <div class=\"meta-column\">\r\n-+        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n-+          <mat-label>Adresse de livraison (si différente)</mat-label>\r\n-+          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"2\" [(ngModel)]=\"invoice.shippingAddress\" name=\"shippingAddress\"></textarea>\r\n-+        </mat-form-field>\r\n-+      </div>\r\n-+       <div class=\"meta-column\">\r\n-+        <!-- Espace réservé pour d'autres détails si nécessaire -->\r\n-+      </div>\r\n-+    </div>\r\n- \r\n-+    <!-- Section Dates et Conditions -->\r\n-+    <div class=\"invoice-details-section\">\r\n-+      <mat-form-field appearance=\"outline\">\r\n-+        <mat-label>Date d'émission</mat-label>\r\n-+        <input matInput type=\"date\" [(ngModel)]=\"invoice.date\" name=\"invoiceDate\" (ngModelChange)=\"onDateOrTermsChange()\">\r\n-+      </mat-form-field>\r\n-+\r\n-+      <mat-form-field appearance=\"outline\">\r\n-+        <mat-label>Conditions de paiement</mat-label>\r\n-+        <input matInput [(ngModel)]=\"invoice.paymentTerms\" name=\"paymentTerms\" (ngModelChange)=\"onDateOrTermsChange()\">\r\n-+      </mat-form-field>\r\n-+\r\n-+      <mat-form-field appearance=\"outline\">\r\n-+        <mat-label>Date d'échéance</mat-label>\r\n-+        <input matInput type=\"date\" [(ngModel)]=\"invoice.dueDate\" name=\"dueDate\" readonly>\r\n-+      </mat-form-field>\r\n-+\r\n-+      <mat-form-field appearance=\"outline\">\r\n-+        <mat-label>N° Bon de commande (Optionnel)</mat-label>\r\n-+        <input matInput [(ngModel)]=\"invoice.purchaseOrder\" name=\"purchaseOrder\">\r\n-+      </mat-form-field>\r\n-+    </div>\r\n-+\r\n-+    <!-- Section Articles de la facture -->\r\n-+    <h3 class=\"section-title\">Articles</h3>\r\n-+    <div class=\"invoice-items\">\r\n-+      <div class=\"item-header item-row\">\r\n-+        <div class=\"item-description\">Description</div>\r\n-+        <div class=\"item-quantity\">Quantité</div>\r\n-+        <div class=\"item-unit-price\">Prix Unitaire (€)</div>\r\n-+        <div class=\"item-total\">Total (€)</div>\r\n-+        <div class=\"item-actions\"></div>\r\n-+      </div>\r\n-+\r\n-+      <div *ngFor=\"let item of invoice.items; let i = index\" class=\"item-row\">\r\n-+        <mat-form-field appearance=\"outline\" class=\"item-description\">\r\n-+          <mat-label>Description</mat-label>\r\n-+          <input matInput [(ngModel)]=\"item.description\" name=\"itemDescription{{i}}\" (ngModelChange)=\"calculateTotals()\">\r\n-+        </mat-form-field>\r\n-+\r\n-+        <mat-form-field appearance=\"outline\" class=\"item-quantity\">\r\n-+          <mat-label>Qté</mat-label>\r\n-+          <input matInput type=\"number\" [(ngModel)]=\"item.quantity\" name=\"itemQuantity{{i}}\" (ngModelChange)=\"calculateTotals()\" min=\"0\">\r\n-+        </mat-form-field>\r\n-+\r\n-+        <mat-form-field appearance=\"outline\" class=\"item-unit-price\">\r\n-+          <mat-label>Prix Unit.</mat-label>\r\n-+          <input matInput type=\"number\" [(ngModel)]=\"item.unitPrice\" name=\"itemUnitPrice{{i}}\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.01\">\r\n-+        </mat-form-field>\r\n-+\r\n-+        <div class=\"item-total\">\r\n-+          {{ (item.quantity * item.unitPrice) | currency:'EUR':'symbol':'1.2-2' }}\r\n-+        </div>\r\n-+\r\n-+        <div class=\"item-actions\">\r\n-+          <button mat-icon-button color=\"warn\" (click)=\"removeItem(i)\" [disabled]=\"invoice.items.length <= 1\" matTooltip=\"Supprimer l'article\">\r\n-+            <mat-icon>delete</mat-icon>\r\n-+          </button>\r\n-+        </div>\r\n-+      </div>\r\n-+\r\n-+      <button mat-stroked-button color=\"primary\" (click)=\"addItem()\" class=\"add-item-button\">\r\n-+        <mat-icon>add</mat-icon> Ajouter un article\r\n-+      </button>\r\n-+    </div>\r\n-+\r\n-+    <!-- Section Totaux et Notes -->\r\n-+    <div class=\"invoice-summary-section\">\r\n-+      <div class=\"summary-left\">\r\n-+        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n-+          <mat-label>Notes (Visible par le client)</mat-label>\r\n-+          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"2\" [(ngModel)]=\"invoice.notes\" name=\"invoiceNotes\"></textarea>\r\n-+        </mat-form-field>\r\n-+        <mat-form-field appearance=\"outline\" class=\"full-width\">\r\n-+          <mat-label>Termes et Conditions</mat-label>\r\n-+          <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows=\"2\" [(ngModel)]=\"invoice.terms\" name=\"invoiceTerms\"></textarea>\r\n-+        </mat-form-field>\r\n-+      </div>\r\n-+\r\n-+      <div class=\"summary-right\">\r\n-+        <div class=\"summary-row\"><span>Sous-total:</span><span>{{ subtotal | currency:'EUR':'symbol':'1.2-2' }}</span></div>\r\n-+        <div class=\"summary-row interactive-row\"><span>TVA (%):</span><mat-form-field appearance=\"outline\" class=\"compact-form-field\"><input matInput type=\"number\" [(ngModel)]=\"invoice.taxRate\" name=\"taxRate\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.1\"></mat-form-field></div>\r\n-+        <div class=\"summary-row\"><span>Montant TVA:</span><span>{{ (subtotal * (invoice.taxRate / 100)) | currency:'EUR':'symbol':'1.2-2' }}</span></div>\r\n-+        <div class=\"summary-row interactive-row\"><span>Remise (€):</span><mat-form-field appearance=\"outline\" class=\"compact-form-field\"><input matInput type=\"number\" [(ngModel)]=\"invoice.discount\" name=\"discount\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.01\"></mat-form-field></div>\r\n-+        <div class=\"summary-row interactive-row\"><span>Frais de port (€):</span><mat-form-field appearance=\"outline\" class=\"compact-form-field\"><input matInput type=\"number\" [(ngModel)]=\"invoice.shipping\" name=\"shipping\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.01\"></mat-form-field></div>\r\n-+        <div class=\"summary-row total-row\"><span>TOTAL:</span><span>{{ total | currency:'EUR':'symbol':'1.2-2' }}</span></div>\r\n-+        <hr>\r\n-+        <div class=\"summary-row interactive-row\"><span>Montant Payé (€):</span><mat-form-field appearance=\"outline\" class=\"compact-form-field\"><input matInput type=\"number\" [(ngModel)]=\"invoice.paid\" name=\"paidAmount\" (ngModelChange)=\"calculateTotals()\" min=\"0\" step=\"0.01\"></mat-form-field></div>\r\n-+        <div class=\"summary-row balance-due-row\"><span>Solde Dû:</span><span>{{ balance | currency:'EUR':'symbol':'1.2-2' }}</span></div>\r\n-+      </div>\r\n-+    </div>\r\n-+  </mat-card-content>\r\n-+\r\n-+  <mat-card-actions align=\"end\">\r\n-+    <button mat-stroked-button routerLink=\"/invoices\">Annuler</button> <!-- Modifiez le routerLink si nécessaire -->\r\n-+    <button mat-raised-button color=\"primary\" (click)=\"saveInvoice()\">Enregistrer la Facture</button>\r\n-+  </mat-card-actions>\r\n-+</mat-card>\r\n+<!-- facture.component.html -->\r\n+<div class=\"invoice-container\">\r\n+  <div class=\"invoice-header\">\r\n+    <div class=\"logo-box\">\r\n+      <div class=\"logo-placeholder\">+ Ajoutez votre logo</div>\r\n+    </div>\r\n+    <div class=\"invoice-title\">\r\n+      <h2>FACTURE</h2>\r\n+      <div class=\"invoice-number\">\r\n+        <label for=\"invoiceNumber\">#</label>\r\n+        <input id=\"invoiceNumber\" [(ngModel)]=\"invoice.number\" />\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+\r\n+  <div class=\"invoice-details\">\r\n+    <div class=\"left\">\r\n+      <h4>VOTRE ENTREPRISE</h4>\r\n+      <label for=\"companyName\">Nom de l'entreprise:</label>\r\n+      <input id=\"companyName\" [(ngModel)]=\"invoice.companyName\" />\r\n+\r\n+\r\n+      <label>A qui s'adresse-t-il ?</label>\r\n+      <input [(ngModel)]=\"invoice.to\" />\r\n+\r\n+      <label>Adresse de livraison</label>\r\n+      <input [(ngModel)]=\"invoice.shippingAddress\" />\r\n+    </div>\r\n+\r\n+    <div class=\"right\">\r\n+      <label>Date</label>\r\n+      <input type=\"date\" [(ngModel)]=\"invoice.date\" />\r\n+\r\n+      <label>Modalités de paiement</label>\r\n+      <input [(ngModel)]=\"invoice.paymentTerms\" />\r\n+\r\n+      <label>A payer avant le</label>\r\n+      <input type=\"date\" [(ngModel)]=\"invoice.dueDate\" />\r\n+\r\n+      <label>Bon de commande</label>\r\n+      <input [(ngModel)]=\"invoice.purchaseOrder\" />\r\n+    </div>\r\n+  </div>\r\n+\r\n+  <table class=\"invoice-table\">\r\n+    <thead>\r\n+      <tr>\r\n+        <th>Objet</th>\r\n+        <th>Quantité</th>\r\n+        <th>Prix unitaire</th>\r\n+        <th>Montant</th>\r\n+      </tr>\r\n+    </thead>\r\n+    <tbody>\r\n+      <tr *ngFor=\"let item of invoice.items\">\r\n+        <td><input [(ngModel)]=\"item.description\" /></td>\r\n+        <td><input type=\"number\" [(ngModel)]=\"item.quantity\" (input)=\"calculateTotals()\" /></td>\r\n+        <td><input type=\"number\" [(ngModel)]=\"item.unitPrice\" (input)=\"calculateTotals()\" /></td>\r\n+        <td>{{ item.quantity * item.unitPrice | currency:'USD' }}</td>\r\n+      </tr>\r\n+    </tbody>\r\n+  </table>\r\n+  <button class=\"add-item\" (click)=\"addItem()\">+ Élément de campagne</button>\r\n+\r\n+  <div class=\"notes-terms\">\r\n+    <div>\r\n+      <label>Remarques</label>\r\n+      <textarea [(ngModel)]=\"invoice.notes\"></textarea>\r\n+    </div>\r\n+    <div>\r\n+      <label>Termes</label>\r\n+      <textarea [(ngModel)]=\"invoice.terms\"></textarea>\r\n+    </div>\r\n+  </div>\r\n+\r\n+  <div class=\"invoice-summary\">\r\n+    <div>Sous-total: {{ subtotal | currency:'USD' }}</div>\r\n+    <div>\r\n+      Impôt:\r\n+      <input type=\"number\" [(ngModel)]=\"invoice.taxRate\" (input)=\"calculateTotals()\" />%\r\n+    </div>\r\n+    <div *ngIf=\"invoice.discount\">- Rabais: {{ invoice.discount | currency:'USD' }}</div>\r\n+    <div *ngIf=\"invoice.shipping\">+ Expédition: {{ invoice.shipping | currency:'USD' }}</div>\r\n+    <div>Total: {{ total | currency:'USD' }}</div>\r\n+    <div>\r\n+      Montant payé:\r\n+      <input type=\"number\" [(ngModel)]=\"invoice.paid\" (input)=\"calculateTotals()\" />\r\n+    </div>\r\n+    <div><strong>Solde à payer: {{ balance | currency:'USD' }}</strong></div>\r\n+  </div>\r\n+</div>\r\n"
                },
                {
                    "date": 1747910487959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,11 +19,12 @@\n       <label for=\"companyName\">Nom de l'entreprise:</label>\r\n       <input id=\"companyName\" [(ngModel)]=\"invoice.companyName\" />\r\n \r\n \r\n-      <label>A qui s'adresse-t-il ?</label>\r\n-      <input [(ngModel)]=\"invoice.to\" />\r\n+        <label for=\"companyAddress\">Adresse:</label>\r\n+      <input id=\"companyAddress\" [(ngModel)]=\"invoice.companyAddress\" />\r\n \r\n+\r\n       <label>Adresse de livraison</label>\r\n       <input [(ngModel)]=\"invoice.shippingAddress\" />\r\n     </div>\r\n \r\n"
                },
                {
                    "date": 1747910506288,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,10 +23,14 @@\n         <label for=\"companyAddress\">Adresse:</label>\r\n       <input id=\"companyAddress\" [(ngModel)]=\"invoice.companyAddress\" />\r\n \r\n \r\n-      <label>Adresse de livraison</label>\r\n-      <input [(ngModel)]=\"invoice.shippingAddress\" />\r\n+      <label for=\"companyPhone\">Téléphone:</label>\r\n+      <input id=\"companyPhone\" [(ngModel)]=\"invoice.companyPhone\" />\r\n+\r\n+      <label for=\"companyEmail\">Email:</label>\r\n+      <input id=\"companyEmail\" [(ngModel)]=\"invoice.companyEmail\" />\r\n+ \r\n     </div>\r\n \r\n     <div class=\"right\">\r\n       <label>Date</label>\r\n"
                },
                {
                    "date": 1747910527023,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,11 +32,16 @@\n  \r\n     </div>\r\n \r\n     <div class=\"right\">\r\n-      <label>Date</label>\r\n-      <input type=\"date\" [(ngModel)]=\"invoice.date\" />\r\n+      <h4>CLIENT</h4>\r\n+      <label for=\"clientSelect\">Choisir un client:</label>\r\n+      <select id=\"clientSelect\" name=\"selectedClient\" [(ngModel)]=\"invoice.selectedClientId\" (ngModelChange)=\"onClientSelected()\">\r\n+        <option [ngValue]=\"null\" disabled>-- Sélectionnez un client --</option>\r\n+        <option *ngFor=\"let client of clients\" [ngValue]=\"client.id\">{{ client.name }}</option>\r\n+      </select>\r\n \r\n+\r\n       <label>Modalités de paiement</label>\r\n       <input [(ngModel)]=\"invoice.paymentTerms\" />\r\n \r\n       <label>A payer avant le</label>\r\n"
                },
                {
                    "date": 1747910543880,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,11 +40,12 @@\n         <option *ngFor=\"let client of clients\" [ngValue]=\"client.id\">{{ client.name }}</option>\r\n       </select>\r\n \r\n \r\n-      <label>Modalités de paiement</label>\r\n-      <input [(ngModel)]=\"invoice.paymentTerms\" />\r\n+       <label for=\"clientName\">Nom du client:</label>\r\n+      <input id=\"clientName\" [(ngModel)]=\"invoice.clientName\" readonly />\r\n \r\n+\r\n       <label>A payer avant le</label>\r\n       <input type=\"date\" [(ngModel)]=\"invoice.dueDate\" />\r\n \r\n       <label>Bon de commande</label>\r\n"
                },
                {
                    "date": 1747910562508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,11 +44,12 @@\n        <label for=\"clientName\">Nom du client:</label>\r\n       <input id=\"clientName\" [(ngModel)]=\"invoice.clientName\" readonly />\r\n \r\n \r\n-      <label>A payer avant le</label>\r\n-      <input type=\"date\" [(ngModel)]=\"invoice.dueDate\" />\r\n+       <label for=\"clientAddress\">Adresse du client:</label>\r\n+      <input id=\"clientAddress\" [(ngModel)]=\"invoice.clientAddress\" readonly />\r\n \r\n+\r\n       <label>Bon de commande</label>\r\n       <input [(ngModel)]=\"invoice.purchaseOrder\" />\r\n     </div>\r\n   </div>\r\n"
                },
                {
                    "date": 1747910580529,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,11 +47,29 @@\n \r\n        <label for=\"clientAddress\">Adresse du client:</label>\r\n       <input id=\"clientAddress\" [(ngModel)]=\"invoice.clientAddress\" readonly />\r\n \r\n+ <label for=\"clientPhone\">Téléphone du client:</label>\r\n+      <input id=\"clientPhone\" [(ngModel)]=\"invoice.clientPhone\" readonly />\r\n \r\n-      <label>Bon de commande</label>\r\n-      <input [(ngModel)]=\"invoice.purchaseOrder\" />\r\n+      <label for=\"clientEmail\">Email du client:</label>\r\n+      <input id=\"clientEmail\" [(ngModel)]=\"invoice.clientEmail\" readonly />\r\n+\r\n+      <label for=\"shippingAddress\">Adresse de livraison:</label>\r\n+      <input id=\"shippingAddress\" [(ngModel)]=\"invoice.shippingAddress\" />\r\n+      \r\n+      <label for=\"invoiceDate\">Date:</label>\r\n+      <input id=\"invoiceDate\" type=\"date\" [(ngModel)]=\"invoice.date\" />\r\n+\r\n+      <label for=\"paymentTerms\">Modalités de paiement:</label>\r\n+      <input id=\"paymentTerms\" [(ngModel)]=\"invoice.paymentTerms\" />\r\n+\r\n+      <label for=\"dueDate\">A payer avant le:</label>\r\n+      <input id=\"dueDate\" type=\"date\" [(ngModel)]=\"invoice.dueDate\" />\r\n+\r\n+      <label for=\"purchaseOrder\">Bon de commande:</label>\r\n+      <input id=\"purchaseOrder\" [(ngModel)]=\"invoice.purchaseOrder\" />\r\n+  \r\n     </div>\r\n   </div>\r\n \r\n   <table class=\"invoice-table\">\r\n"
                },
                {
                    "date": 1747910690780,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,23 +52,8 @@\n       <input id=\"clientPhone\" [(ngModel)]=\"invoice.clientPhone\" readonly />\r\n \r\n       <label for=\"clientEmail\">Email du client:</label>\r\n       <input id=\"clientEmail\" [(ngModel)]=\"invoice.clientEmail\" readonly />\r\n-\r\n-      <label for=\"shippingAddress\">Adresse de livraison:</label>\r\n-      <input id=\"shippingAddress\" [(ngModel)]=\"invoice.shippingAddress\" />\r\n-      \r\n-      <label for=\"invoiceDate\">Date:</label>\r\n-      <input id=\"invoiceDate\" type=\"date\" [(ngModel)]=\"invoice.date\" />\r\n-\r\n-      <label for=\"paymentTerms\">Modalités de paiement:</label>\r\n-      <input id=\"paymentTerms\" [(ngModel)]=\"invoice.paymentTerms\" />\r\n-\r\n-      <label for=\"dueDate\">A payer avant le:</label>\r\n-      <input id=\"dueDate\" type=\"date\" [(ngModel)]=\"invoice.dueDate\" />\r\n-\r\n-      <label for=\"purchaseOrder\">Bon de commande:</label>\r\n-      <input id=\"purchaseOrder\" [(ngModel)]=\"invoice.purchaseOrder\" />\r\n   \r\n     </div>\r\n   </div>\r\n \r\n@@ -96,12 +81,9 @@\n     <div>\r\n       <label>Remarques</label>\r\n       <textarea [(ngModel)]=\"invoice.notes\"></textarea>\r\n     </div>\r\n-    <div>\r\n-      <label>Termes</label>\r\n-      <textarea [(ngModel)]=\"invoice.terms\"></textarea>\r\n-    </div>\r\n+    \r\n   </div>\r\n \r\n   <div class=\"invoice-summary\">\r\n     <div>Sous-total: {{ subtotal | currency:'USD' }}</div>\r\n"
                },
                {
                    "date": 1747910903954,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n   </div>\r\n \r\n   <div class=\"invoice-details\">\r\n     <div class=\"left\">\r\n-      <h4>VOTRE ENTREPRISE</h4>\r\n+      <h4>Votre Agence</h4>\r\n       <label for=\"companyName\">Nom de l'entreprise:</label>\r\n       <input id=\"companyName\" [(ngModel)]=\"invoice.companyName\" />\r\n \r\n \r\n@@ -32,9 +32,9 @@\n  \r\n     </div>\r\n \r\n     <div class=\"right\">\r\n-      <h4>CLIENT</h4>\r\n+      <h4>Client</h4>\r\n       <label for=\"clientSelect\">Choisir un client:</label>\r\n       <select id=\"clientSelect\" name=\"selectedClient\" [(ngModel)]=\"invoice.selectedClientId\" (ngModelChange)=\"onClientSelected()\">\r\n         <option [ngValue]=\"null\" disabled>-- Sélectionnez un client --</option>\r\n         <option *ngFor=\"let client of clients\" [ngValue]=\"client.id\">{{ client.name }}</option>\r\n@@ -84,9 +84,9 @@\n     </div>\r\n     \r\n   </div>\r\n \r\n-  <div class=\"invoice-summary\">\r\n+  <div class=\"invoice-summary right\">\r\n     <div>Sous-total: {{ subtotal | currency:'USD' }}</div>\r\n     <div>\r\n       Impôt:\r\n       <input type=\"number\" [(ngModel)]=\"invoice.taxRate\" (input)=\"calculateTotals()\" />%\r\n"
                },
                {
                    "date": 1747912226741,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,20 +16,20 @@\n   <div class=\"invoice-details\">\r\n     <div class=\"left\">\r\n       <h4>Votre Agence</h4>\r\n       <label for=\"companyName\">Nom de l'entreprise:</label>\r\n-      <input id=\"companyName\" [(ngModel)]=\"invoice.companyName\" />\r\n+      <input id=\"companyName\" [(ngModel)]=\"company.name\" />\r\n \r\n \r\n         <label for=\"companyAddress\">Adresse:</label>\r\n-      <input id=\"companyAddress\" [(ngModel)]=\"invoice.companyAddress\" />\r\n+      <input id=\"companyAddress\" [(ngModel)]=\"company.address\" />\r\n \r\n \r\n       <label for=\"companyPhone\">Téléphone:</label>\r\n-      <input id=\"companyPhone\" [(ngModel)]=\"invoice.companyPhone\" />\r\n+      <input id=\"companyPhone\" [(ngModel)]=\"company.phone\" />\r\n \r\n       <label for=\"companyEmail\">Email:</label>\r\n-      <input id=\"companyEmail\" [(ngModel)]=\"invoice.companyEmail\" />\r\n+      <input id=\"companyEmail\" [(ngModel)]=\"company.email\" />\r\n  \r\n     </div>\r\n \r\n     <div class=\"right\">\r\n"
                },
                {
                    "date": 1747912888868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,12 +4,20 @@\n     <div class=\"logo-box\">\r\n       <div class=\"logo-placeholder\">+ Ajoutez votre logo</div>\r\n     </div>\r\n     <div class=\"invoice-title\">\r\n-      <h2>FACTURE</h2>\r\n-      <div class=\"invoice-number\">\r\n-        <label for=\"invoiceNumber\">#</label>\r\n-        <input id=\"invoiceNumber\" [(ngModel)]=\"invoice.number\" />\r\n+      <h2>{{ getDocumentTitle() }}</h2>\r\n+      <div class=\"invoice-meta\">\r\n+        <div class=\"invoice-number\">\r\n+          <label for=\"invoiceNumber\">#</label>\r\n+          <input id=\"invoiceNumber\" type=\"number\" [(ngModel)]=\"invoice.number\" />\r\n+        </div>\r\n+        <div>\r\n+          <label for=\"documentTypeSelect\">Type:</label>\r\n+          <select id=\"documentTypeSelect\" [(ngModel)]=\"invoice.documentType\" (ngModelChange)=\"calculateTotals()\">\r\n+            <option *ngFor=\"let type of documentTypes\" [value]=\"type\">{{ type }}</option>\r\n+          </select>\r\n+        </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n \r\n"
                },
                {
                    "date": 1747912907869,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,10 +68,11 @@\n   <table class=\"invoice-table\">\r\n     <thead>\r\n       <tr>\r\n         <th>Objet</th>\r\n-        <th>Quantité</th>\r\n-        <th>Prix unitaire</th>\r\n+         <th class=\"text-right\">Quantité</th>\r\n+        <th class=\"text-right\">Prix unitaire</th>\r\n+       \r\n         <th>Montant</th>\r\n       </tr>\r\n     </thead>\r\n     <tbody>\r\n"
                },
                {
                    "date": 1747912916210,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,8 +72,9 @@\n          <th class=\"text-right\">Quantité</th>\r\n         <th class=\"text-right\">Prix unitaire</th>\r\n        \r\n         <th>Montant</th>\r\n+        <th>Action</th>\r\n       </tr>\r\n     </thead>\r\n     <tbody>\r\n       <tr *ngFor=\"let item of invoice.items\">\r\n"
                },
                {
                    "date": 1747912928483,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,9 +76,10 @@\n         <th>Action</th>\r\n       </tr>\r\n     </thead>\r\n     <tbody>\r\n-      <tr *ngFor=\"let item of invoice.items\">\r\n+      <tr *ngFor=\"let item of invoice.items; let i = index\">\r\n+      \r\n         <td><input [(ngModel)]=\"item.description\" /></td>\r\n         <td><input type=\"number\" [(ngModel)]=\"item.quantity\" (input)=\"calculateTotals()\" /></td>\r\n         <td><input type=\"number\" [(ngModel)]=\"item.unitPrice\" (input)=\"calculateTotals()\" /></td>\r\n         <td>{{ item.quantity * item.unitPrice | currency:'USD' }}</td>\r\n"
                },
                {
                    "date": 1747912938311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,5 +110,6 @@\n       <input type=\"number\" [(ngModel)]=\"invoice.paid\" (input)=\"calculateTotals()\" />\r\n     </div>\r\n     <div><strong>Solde à payer: {{ balance | currency:'USD' }}</strong></div>\r\n   </div>\r\n+  \r\n </div>\r\n"
                },
                {
                    "date": 1747912946529,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,6 +110,9 @@\n       <input type=\"number\" [(ngModel)]=\"invoice.paid\" (input)=\"calculateTotals()\" />\r\n     </div>\r\n     <div><strong>Solde à payer: {{ balance | currency:'USD' }}</strong></div>\r\n   </div>\r\n-  \r\n+  <div class=\"invoice-actions\">\r\n+    <button class=\"btn btn-primary\" (click)=\"saveInvoice()\">Enregistrer {{ getDocumentTitle() }}</button>\r\n+    <!-- Autres actions possibles ici -->\r\n+  </div>\r\n </div>\r\n"
                },
                {
                    "date": 1747913003277,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n     <div>\r\n       Montant payé:\r\n       <input type=\"number\" [(ngModel)]=\"invoice.paid\" (input)=\"calculateTotals()\" />\r\n     </div>\r\n-    <div><strong>Solde à payer: {{ balance | currency:'USD' }}</strong></div>\r\n+    <div><strong>Solde à payer: {{ balance | currency:'TND' }}</strong></div>\r\n   </div>\r\n   <div class=\"invoice-actions\">\r\n     <button class=\"btn btn-primary\" (click)=\"saveInvoice()\">Enregistrer {{ getDocumentTitle() }}</button>\r\n     <!-- Autres actions possibles ici -->\r\n"
                },
                {
                    "date": 1747913214840,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,14 @@\n       \r\n         <td><input [(ngModel)]=\"item.description\" /></td>\r\n         <td><input type=\"number\" [(ngModel)]=\"item.quantity\" (input)=\"calculateTotals()\" /></td>\r\n         <td><input type=\"number\" [(ngModel)]=\"item.unitPrice\" (input)=\"calculateTotals()\" /></td>\r\n-        <td>{{ item.quantity * item.unitPrice | currency:'USD' }}</td>\r\n+       <td>{{ (item.quantity * item.unitPrice) || 0 | currency:'TND' }}</td>\r\n+        <td class=\"action-cell\">\r\n+          <button class=\"delete-item-btn\" (click)=\"removeItem(i)\" [disabled]=\"invoice.items.length <= 1\" title=\"Supprimer la ligne\">\r\n+            -\r\n+          </button>\r\n+        </td>\r\n       </tr>\r\n     </tbody>\r\n   </table>\r\n   <button class=\"add-item\" (click)=\"addItem()\">+ Élément de campagne</button>\r\n"
                },
                {
                    "date": 1747913329613,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,12 +109,8 @@\n     </div>\r\n     <div *ngIf=\"invoice.discount\">- Rabais: {{ invoice.discount | currency:'USD' }}</div>\r\n     <div *ngIf=\"invoice.shipping\">+ Expédition: {{ invoice.shipping | currency:'USD' }}</div>\r\n     <div>Total: {{ total | currency:'USD' }}</div>\r\n-    <div>\r\n-      Montant payé:\r\n-      <input type=\"number\" [(ngModel)]=\"invoice.paid\" (input)=\"calculateTotals()\" />\r\n-    </div>\r\n     <div><strong>Solde à payer: {{ balance | currency:'TND' }}</strong></div>\r\n   </div>\r\n   <div class=\"invoice-actions\">\r\n     <button class=\"btn btn-primary\" (click)=\"saveInvoice()\">Enregistrer {{ getDocumentTitle() }}</button>\r\n"
                },
                {
                    "date": 1747913766992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,9 +101,9 @@\n     \r\n   </div>\r\n \r\n   <div class=\"invoice-summary right\">\r\n-    <div>Sous-total: {{ subtotal | currency:'USD' }}</div>\r\n+    <div>Sous-total: {{ subtotal | currency:'TND' }}</div>\r\n     <div>\r\n       Impôt:\r\n       <input type=\"number\" [(ngModel)]=\"invoice.taxRate\" (input)=\"calculateTotals()\" />%\r\n     </div>\r\n"
                },
                {
                    "date": 1747913775173,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,10 +106,10 @@\n     <div>\r\n       Impôt:\r\n       <input type=\"number\" [(ngModel)]=\"invoice.taxRate\" (input)=\"calculateTotals()\" />%\r\n     </div>\r\n-    <div *ngIf=\"invoice.discount\">- Rabais: {{ invoice.discount | currency:'USD' }}</div>\r\n-    <div *ngIf=\"invoice.shipping\">+ Expédition: {{ invoice.shipping | currency:'USD' }}</div>\r\n+    <div *ngIf=\"invoice.discount\">- Rabais: {{ invoice.discount | currency:'TND' }}</div>\r\n+    <div *ngIf=\"invoice.shipping\">+ Expédition: {{ invoice.shipping | currency:'TND' }}</div>\r\n     <div>Total: {{ total | currency:'USD' }}</div>\r\n     <div><strong>Solde à payer: {{ balance | currency:'TND' }}</strong></div>\r\n   </div>\r\n   <div class=\"invoice-actions\">\r\n"
                },
                {
                    "date": 1747913844870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,9 @@\n       \r\n         <td><input [(ngModel)]=\"item.description\" /></td>\r\n         <td><input type=\"number\" [(ngModel)]=\"item.quantity\" (input)=\"calculateTotals()\" /></td>\r\n         <td><input type=\"number\" [(ngModel)]=\"item.unitPrice\" (input)=\"calculateTotals()\" /></td>\r\n-       <td>{{ (item.quantity * item.unitPrice) || 0 | currency:'TND' }}</td>\r\n+       <td>{{ (item.quantity * item.unitPrice) || 0  }}</td>\r\n         <td class=\"action-cell\">\r\n           <button class=\"delete-item-btn\" (click)=\"removeItem(i)\" [disabled]=\"invoice.items.length <= 1\" title=\"Supprimer la ligne\">\r\n             -\r\n           </button>\r\n@@ -108,9 +108,9 @@\n       <input type=\"number\" [(ngModel)]=\"invoice.taxRate\" (input)=\"calculateTotals()\" />%\r\n     </div>\r\n     <div *ngIf=\"invoice.discount\">- Rabais: {{ invoice.discount | currency:'TND' }}</div>\r\n     <div *ngIf=\"invoice.shipping\">+ Expédition: {{ invoice.shipping | currency:'TND' }}</div>\r\n-    <div>Total: {{ total | currency:'USD' }}</div>\r\n+    <div>Total: {{ total | currency:'TND' }}</div>\r\n     <div><strong>Solde à payer: {{ balance | currency:'TND' }}</strong></div>\r\n   </div>\r\n   <div class=\"invoice-actions\">\r\n     <button class=\"btn btn-primary\" (click)=\"saveInvoice()\">Enregistrer {{ getDocumentTitle() }}</button>\r\n"
                }
            ],
            "date": 1747865132872,
            "name": "Commit-0",
            "content": "<mat-card class=\"add-invoice-card\">\r\n  <mat-card-header>\r\n    <mat-card-title>Créer une Nouvelle Facture</mat-card-title>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <form [formGroup]=\"invoiceForm\" (ngSubmit)=\"onSubmit()\">\r\n      <!-- Client Selection -->\r\n      <mat-form-field appearance=\"outline\" class=\"form-field full-width\">\r\n        <mat-label>Client</mat-label>\r\n        <mat-select formControlName=\"clientId\">\r\n          <mat-option *ngFor=\"let client of clients\" [value]=\"client.id\">\r\n            {{ client.name }}\r\n          </mat-option>\r\n        </mat-select>\r\n        <mat-error *ngIf=\"invoiceForm.get('clientId')?.hasError('required') && invoiceForm.get('clientId')?.touched\">\r\n          Le client est requis.\r\n        </mat-error>\r\n      </mat-form-field>\r\n\r\n      <!-- Discount -->\r\n      <mat-form-field appearance=\"outline\" class=\"form-field\">\r\n        <mat-label>Remise (%)</mat-label>\r\n        <input matInput type=\"number\" formControlName=\"discount\" min=\"0\" max=\"100\">\r\n        <mat-error *ngIf=\"invoiceForm.get('discount')?.touched && invoiceForm.get('discount')?.invalid\">\r\n          La remise doit être un nombre valide entre 0 et 100.\r\n        </mat-error>\r\n      </mat-form-field>\r\n\r\n      <!-- Notes -->\r\n      <mat-form-field appearance=\"outline\" class=\"form-field full-width\">\r\n        <mat-label>Notes (Optionnel)</mat-label>\r\n        <textarea matInput formControlName=\"notes\" cdkTextareaAutosize cdkAutosizeMinRows=\"2\" cdkAutosizeMaxRows=\"5\" placeholder=\"Ajoutez des notes ou termes spécifiques...\"></textarea>\r\n      </mat-form-field>\r\n\r\n      <!-- Invoice Lines Section -->\r\n      <div class=\"invoice-lines-section\">\r\n        <div class=\"section-title-bar\">\r\n          <h3>Lignes de la facture</h3>\r\n          <button mat-stroked-button color=\"primary\" (click)=\"addInvoiceLine()\" type=\"button\" class=\"add-line-button\">\r\n            <mat-icon>add</mat-icon> Ajouter une ligne\r\n          </button>\r\n        </div>\r\n        <div formArrayName=\"lines\">\r\n          <div *ngFor=\"let line of linesArray.controls; let i=index\" [formGroupName]=\"i\" class=\"invoice-line-item\">\r\n            <mat-form-field appearance=\"outline\" class=\"line-field description-field\">\r\n              <mat-label>Description Article/Service</mat-label>\r\n              <input matInput formControlName=\"description\">\r\n              <mat-error *ngIf=\"line.get('description')?.hasError('required') && line.get('description')?.touched\">\r\n                Description requise.\r\n              </mat-error>\r\n            </mat-form-field>\r\n\r\n            <mat-form-field appearance=\"outline\" class=\"line-field quantity-field\">\r\n              <mat-label>Qté</mat-label>\r\n              <input matInput type=\"number\" formControlName=\"quantity\" min=\"1\">\r\n               <mat-error *ngIf=\"line.get('quantity')?.touched && line.get('quantity')?.invalid\">\r\n                Min 1.\r\n              </mat-error>\r\n            </mat-form-field>\r\n\r\n            <mat-form-field appearance=\"outline\" class=\"line-field price-field\">\r\n              <mat-label>Prix Unitaire</mat-label>\r\n              <input matInput type=\"number\" formControlName=\"unitPrice\" min=\"0\">\r\n              <mat-error *ngIf=\"line.get('unitPrice')?.touched && line.get('unitPrice')?.invalid\">\r\n                Prix positif requis.\r\n              </mat-error>\r\n            </mat-form-field>\r\n\r\n            <button mat-icon-button color=\"warn\" (click)=\"removeInvoiceLine(i)\" type=\"button\" class=\"remove-line-button\" [disabled]=\"linesArray.controls.length <= 1\" title=\"Supprimer la ligne\">\r\n              <mat-icon>remove_circle_outline</mat-icon>\r\n            </button>\r\n          </div>\r\n          <mat-error *ngIf=\"linesArray.hasError('minlength') && invoiceForm.get('lines')?.touched\" class=\"form-array-error\">\r\n            Au moins une ligne de facture est requise.\r\n          </mat-error>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Hidden fields for data that is fixed or derived -->\r\n      <input type=\"hidden\" formControlName=\"documentType\">\r\n      <input type=\"hidden\" formControlName=\"companyId\">\r\n\r\n      <mat-card-actions align=\"end\" class=\"form-actions\">\r\n        <button mat-stroked-button type=\"button\" (click)=\"onCancel()\" class=\"action-button cancel-button\">Annuler</button>\r\n        <button mat-flat-button color=\"primary\" type=\"submit\" class=\"action-button save-button\" [disabled]=\"invoiceForm.invalid || invoiceForm.pristine\">\r\n          <mat-icon>save</mat-icon> Enregistrer la Facture\r\n        </button>\r\n      </mat-card-actions>\r\n    </form>\r\n  </mat-card-content>\r\n</mat-card>\r\n"
        }
    ]
}