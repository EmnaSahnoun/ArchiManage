<div class="task-details-container">
    <div class="task-header">
      <h2>{{ task?.name }}</h2>
      <div class="priority-badge" [class.high]="task?.priority === 'HIGH'"
                                    [class.medium]="task?.priority === 'MEDIUM'"
                                    [class.low]="task?.priority === 'LOW'">
              {{ task?.priority }}
            </div>
            <span class="status-badge" [class.TODO]="task?.status === 'TODO'"
            [class.COMPLETED]="task?.status === 'COMPLETED'"
            [class.IN_PROGRESS]="task?.status === 'IN_PROGRESS'">{{ task?.status }}</span>
      <button mat-icon-button class="close-btn" (click)="closeModal()">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>
  
    <div class="task-content">
      <!-- Left Column -->
      <div class="task-left-column">
        
       
  
        <div class="task-section">
          
          <div class="date-range">
            <div class="date-item">
              <label>Start Date</label>
              <p>{{ task?.startDate | date:'mediumDate' }}</p>
            </div>
            <div class="date-item">
              <label>End Date</label>
              <p>{{ task?.endDate | date:'mediumDate' }}</p>
            </div>
          </div>
        </div>
  
        <div class="task-section">
          <h3>Assignees</h3>
          <div class="subtasks-list">
            <div class="subtask-item" *ngFor="let subtask of subtasks">
              <div class="subtask-info">
                <i class="bi bi-check-circle"></i>
                <span>{{ subtask.name }}</span>
              </div>
              <div class="assignee">
                <span class="assignee-name">{{ subtask.assignee }}</span>
              </div>
            </div>
          </div>
        </div>
  
        <div class="task-section">
          <h3>Attachments</h3>
          <div class="attachments-list">
            <div class="attachment-item" *ngFor="let attachment of task?.attachments">
              <i class="bi bi-paperclip"></i>
              <div class="attachment-info">
                <strong>{{ attachment.name }}</strong>
                <small>{{ attachment.description }}</small>
              </div>
              <button mat-icon-button>
                <i class="bi bi-download"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Right Column -->
      <div class="task-right-column">
        <div class="task-section">
          <h3>Task Overview</h3>
          <p class="task-description">{{ task?.description }}</p>
        </div>
  
       
  
        
  
        <div class="task-section">
          <h3>Activity</h3>
          <div class="activity-timeline">
            <div class="activity-item" *ngFor="let activity of task?.activities">
              <div class="activity-header">
                <span class="user">{{ activity.user }}</span>
                <span class="timestamp">{{ activity.timestamp | date:'short' }}</span>
              </div>
              <p class="activity-content">{{ activity.content }}</p>
              <button class="reply-btn" *ngIf="activity.hasReply">Reply</button>
            </div>
            <div *ngIf="!task?.activities || task?.activities?.length === 0" class="no-comments">
              No activities yet.
            </div>
          </div>
          <div class="new-comment">
            <textarea placeholder="Add an activity update..."></textarea> <!-- Placeholder text changed for clarity -->
            <button mat-raised-button color="primary">Post Update</button> <!-- Button text changed for clarity -->
       
          </div>
        </div>

        <!-- Comments Section -->
        <div class="task-section">
          <h3>Comments</h3>
          <div class="comments-list">
            <div class="comment-item" *ngFor="let comment of task?.comments">
              <div class="comment-header">
                <span class="user">{{ comment.user }}</span>
                <span class="timestamp">{{ comment.timestamp | date:'short' }}</span>
              </div>
              <p class="comment-content">{{ comment.content }}</p>
            </div>
            <div *ngIf="!task?.comments || task?.comments?.length === 0" class="no-comments">
              No comments yet. Be the first to comment!
            </div>
          </div>
          <div class="add-comment-section"> <!-- Changed class name -->
            <textarea [(ngModel)]="newCommentText" placeholder="Add a public comment..."></textarea>
            <button mat-raised-button color="primary" (click)="addComment()">Post Comment</button>
          </div>
        </div>
      </div>
    </div>
  </div>