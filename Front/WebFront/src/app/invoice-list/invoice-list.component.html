<div class="invoice-list-container">
  <div class="page-header">
    <h1>Liste des Factures</h1>
    <button (click)="navigateToCreateInvoice()" class="btn btn-primary">
      <i class="bi bi-plus-circle"></i> Créer une Facture
    </button>
  </div>

  <div *ngIf="isLoading" class="loading-indicator">
    Chargement des factures...
  </div>

  <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
    <button (click)="loadInvoices()" class="btn btn-secondary">Réessayer</button>
  </div>

  <div *ngIf="!isLoading && !errorMessage && invoices.length === 0" class="no-data">
    <p>Aucune facture trouvée. Commencez par <a (click)="navigateToCreateInvoice()">en créer une nouvelle</a>.</p>
  </div>

  <div *ngIf="!isLoading && !errorMessage && invoices.length > 0" class="invoices-table-container">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Numéro</th>
          <th>Client</th>
          <th>Date de Création</th>
          <th>Montant Total</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let invoice of invoices">
          <td>{{ invoice.documentNumber }}</td>
          <td>{{ invoice.company?.name || 'N/A' }}</td>
          <td>{{ formatDate(invoice.createdAt) }}</td> <!-- Or use Angular DatePipe: {{ invoice.createdAt | date:'dd/MM/yyyy' }} -->
          <td class="text-right">{{ formatCurrency(invoice.totalAmount) }}</td> <!-- Or use Angular CurrencyPipe: {{ invoice.totalAmount | currency:'TND':'symbol':'1.2-2':'fr' }} -->
          <td>
            <span class="status-badge" [ngClass]="getStatusClass(invoice.status)">
              {{ invoice.status }}
            </span>
          </td>
          <td>
            <button (click)="viewInvoice(invoice.id)" class="btn btn-sm btn-info" title="Voir">
              <i class="bi bi-eye"></i>
            </button>
            <button (click)="editInvoice(invoice.id)" class="btn btn-sm btn-warning" title="Modifier">
              <i class="bi bi-pencil-square"></i>
            </button>
            <button (click)="confirmDelete(invoice)" class="btn btn-sm btn-danger" title="Supprimer">
              <i class="bi bi-trash"></i>
            </button>
            <!-- Add print button if needed here or on detail page -->
            <!-- <button (click)="printInvoice(invoice.id)" class="btn btn-sm btn-secondary" title="Imprimer">
              <i class="bi bi-printer"></i>
            </button> -->
          </td>
        </tr>
      </tbody>
    </table>
    
</div>
  </div>

